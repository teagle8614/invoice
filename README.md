# 統一發票紀錄
## 使用者情境：
```
1. 有一個輸入畫面可以用來輸入每次拿到的發票號碼，輸入完成的號碼會存到資料庫中
2. 有一個輸入畫面可以用來輸入當期的中獎獎號，並可以區分各獎項及期別，輸入完成的獎號和期別會存入資料庫中
3. 有一個畫面可以用來檢視所有的發票，並有連結或選單可以過濾發票的月份或期別
4. 有一顆按鈕可以用來針對某個期別的發票進行對獎。
5. 對獎的結果可以顯示：六獎=>1張=>小計200元;五獎=>2張=>小計2千元;合計2200元
```
## 畫面設計：
1. 首頁(index.php)
   - 選輸入的期別及月份
   - 有一個輸入欄位，用來輸入發票號碼
   - 有一顆送出按鈕，按後會裝發票號碼存入資料庫
   - 有一個顯示當期發票的按鈕，按下後會跳到發票列表畫面
   - 有一個對獎按鈕，按下後會跳到對獎畫面
   - 有一個輸入獎號按鈕，按下後跳到輸入獎號畫面
2. 發票列表(list.php)
   - 會優先顯示當期的發票列表
   - 有提供按鈕或連結可以顯示當年度不同期別的發票列表
   - 每個發票號碼後面有一個編輯按鈕，按下後可以修改發票號碼
3. 對獎畫面(award.php)
   - 會顯示當期可對獎的期別獎號
   - 有一個按鈕[對獎]，按下後會針對該期別的發票進行對獎
   - 逐一對獎並顯示中獎與否
   - 對獎完畢後顯示總計畫面
4. 輸入獎號畫面(invoice.php)
   - 畫面分別顯示各獎別的欄位
   - 有一個按鈕是送出，有一個按鈕是重置
   - 依序填入獎號後可以按下送出按鈕
   - 獎號送出後會存入資料庫
   - 有一個查看獎號按鈕，按下後會跳到查詢獎號畫面
5. 查詢獎號畫面(query.php)
   - 顯示當年度六期的期別按鈕
   - 按下某期的按鈕會顯示該期的獎號
   - 有一個編輯的按鈕，按下後可以編輯該期別的獎號
## 資料庫設計
1. 發票資料表-invoice
   - id
   - code
   - number
   - period
   - expend
   - year
2. 獎號資料表- award_number
   - id
   - period
   - item
   - number
   - year
3. 中獎紀錄表- reward_record
   - id
   - number
   - period
   - reward
   - expend
   - year
## 程式功能設計
1. 接收發票號並存入資料庫
2. 接收獎號並存入資料庫
3. 接收中獎紀錄並存入資料庫
4. 發票列表功能
   - by 月 顯示
   - by 期別 顯示
   - 預設顯示當期的發票列表
   - 編輯發票號碼
5. 獎號列表功能
6. 獎號編輯功能
7. 對獎功能
   - 撈出對應期別的發票
   - 依獎項別逐一對獎並顯示結果
   - 對獎結束顯示總計畫面

### 開發紀錄
* 2020-05-08
   - 專案開始 
* 2020-05-31
   - 基本需求功能完成
* 2020-06-01
   - 【award】- 兌獎時間提示
* 2020-06-03
   - 【award】- 整個table改為foreach生成
   - 【award】- 獎項、獎金改為從資料庫抓取
   - 【award】- 對獎按鈕在沒有撈出任何獎號時則不顯示
   - 刪除多餘的form標籤+css修改
   - 【index】- 跳轉頁更改為同頁提示視窗
   - 【award_list】- 抓取資料修改
* 2020-06-04
   - 【award_list】- 中獎時有煙火特效
   - 【award_list】- 沒獎號資料時，只顯示table的第一列，並顯示提示文字
### 尚未做的功能與調整
* 【All】
  - 登入功能...?
  - 輸入資料的字數限制(maxlength對type="nubmer"的字數限定無效) => 可能要用js、jq
  - 美化
* 【index.php】
  - 輸入發票的跳轉頁美化或更改為同頁顯示提示視窗 -> 6/3 OK
* 【list.php】
  - 刪除功能 -> OK
  - 分頁(10 or 15筆一頁)
* 【invoice.php】
  - 判斷是否資料庫已有輸入的值來防止重複輸入? -> 5/31 OK
* 【query.php】
  - 針對輸入獎號頁做修改(全部刪除) -> 5/31 OK
* 【award.php】
  - 全部對獎尚有bug  -> 5/31 OK
  - 小提示的顯示時間  -> 6/1 OK
  - 沒有獎號的項目不可對獎 -> 或是直接不顯示  -> 6/3 OK
  - 最理想狀態: 沒獎號的該列隱藏(在輸入獎號頁以限定每獎項必輸入一筆，可考慮全部的顯示與否即可..?) [目前暫無想到解決方法] -> 6/4 OK
* 【award_list.php】
  - 增加圖片或特效美化中獎時的頁面...? -> 6/4 OK
  - 計算各個獎項的小計與修改總計顯示內容
* 【測試】
  - 對獎除了2020.5 6月外，尚未測試其他月份的中獎顯示狀況 -> 6/3目前測試正常
* 【其他】
  - 找尋刪除資料表與匯入資料表的方法



### 快捷鍵
* ctrl + shift + v : 預覽
* ctrl + k 同時按一下後 在按v - 編輯時預覽
